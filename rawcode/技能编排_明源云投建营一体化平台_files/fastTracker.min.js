/*!
 * Release Version: 1.0.1-r27
 * Release Time: Tue Nov 26 2024 18:39:09 GMT+0800 (中国标准时间)
 */
!function(e,t){
if(e===window){e.fastTracker=t();e.myWebLogTracker=t();}
//[ONLINE-CONFIG]
"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("fastTracker",[],t):"object"==typeof exports?exports.fastTracker=t():e.fastTracker=t()}(this,(function(){return function(){var e={553:function(e){var t=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(L){s=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof _?t:_,a=Object.create(o.prototype),i=new T(n||[]);return a._invoke=function(e,t,r){var n=l;return function(o,a){if(n===p)throw new Error("Generator is already running");if(n===g){if("throw"===o)throw a;return P()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=E(i,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=p;var s=f(e,t,r);if("normal"===s.type){if(n=r.done?g:d,s.arg===h)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n=g,r.method="throw",r.arg=s.arg)}}}(e,r,i),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(L){return{type:"throw",arg:L}}}e.wrap=u;var l="suspendedStart",d="suspendedYield",p="executing",g="completed",h={};function _(){}function m(){}function y(){}var v={};s(v,a,(function(){return this}));var w=Object.getPrototypeOf,b=w&&w(w(D([])));b&&b!==r&&n.call(b,a)&&(v=b);var O=y.prototype=_.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(o,a,i,c){var s=f(e[o],e,a);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==typeof l&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(l).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(s.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function E(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator["return"]&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method))return h;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var o=f(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function D(e){if(e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}return{next:P}}function P(){return{value:t,done:!0}}return m.prototype=y,s(O,"constructor",y),s(y,"constructor",m),m.displayName=s(y,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,s(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},e.awrap=function(e){return{__await:e}},k(x.prototype),s(x.prototype,i,(function(){return this})),e.AsyncIterator=x,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new x(u(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(O),s(O,c,"Generator"),s(O,a,(function(){return this})),s(O,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=D,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),h}},"catch":function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:D(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}(e.exports);try{regeneratorRuntime=t}catch(r){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},757:function(e,t,r){e.exports=r(553)}},t={};function r(n){var o=t[n];if(o!==undefined)return o.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,r),a.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};var n={};return function(){"use strict";function e(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){var r,n;(n="undefined"!=typeof window&&window.navigator.userAgent.toLowerCase())&&/msie|trident/.test(n)?(r=document.createEvent("CustomEvent")).initCustomEvent(e,!1,!1,t):window.CustomEvent?r=new CustomEvent(e,{detail:t}):((r=document.createEvent("HTMLEvents")).initEvent(e,!1,!0),r.detail=t),window.dispatchEvent(r)}function s(e,t,r,n){var o=function c(e){return e&&(e.preventDefault=c.preventDefault,e.stopPropagation=c.stopPropagation),e};o.preventDefault=function(){this.returnValue=!1},o.stopPropagation=function(){this.cancelBubble=!0};var a=function(e,t,r,n){return function(a){if(!(a=a||o(window.event)))return undefined;a.target=a.srcElement;var i,c=!0;"function"==typeof r&&(i=r(a));var s=t.call(e,a);return"beforeunload"!==n?(!1!==i&&!1!==s||(c=!1),c):void 0}},i=function(e,t,r){if(n===undefined&&"click"===t&&(n=!0),e&&e.addEventListener)e.addEventListener(t,(function(e){e._getPath=o._getPath,r.call(this,e)}),n);else{var i="on".concat(t),c=e[i];e[i]=a(e,r,c,t)}};i.apply(null,arguments)}r.d(n,{"default":function(){return Ft}});var u=600,f=18e5,l=["endpoint","include_search","collect_event_types","report_api_params","trace_config"],d="__fastTracker__",p="__myWebLogTracker__",g="/data/(data|user/\\d+)/[^/]+/files/www",h="/var/mobile/Containers/Data/Application/[^/]+/Documents/www",_="Hybrid APP",m="x-fast-trace-id",y=["page_stay","page_load","page","click","api","error","crash","start","pause","resume","fmp","anr"],v=[{c:"tenant_reader",n:"tenant_code",sn:"tn"},{c:"real_user_reader",n:"user_account",sn:"ru"},{c:"user_group_reader",n:"user_group",sn:"ug"},{c:"real_user_name_reader",n:"real_user_name",sn:"run"},{c:"real_user_role_reader",n:"real_user_role",sn:"rur"},{c:"real_user_post_reader",n:"real_user_post",sn:"rup"},{c:"real_user_bu_name_reader",n:"real_user_bu_name",sn:"rubn"}],w={top:1,com:1,xyz:1,xin:1,vip:1,win:1,red:1,net:1,org:1,wang:1,gov:1,edu:1,mil:1,co:1,biz:1,name:1,info:1,mobi:1,pro:1,travel:1,club:1,museum:1,int:1,aero:1,post:1,rec:1,asia:1,art:1,firm:1,nom:1,store:1,web:1},b={ad:1,ae:1,af:1,ag:1,ai:1,al:1,am:1,an:1,ao:1,aa:1,ar:1,as:1,at:1,au:1,aw:1,az:1,ba:1,bb:1,bd:1,be:1,bf:1,bg:1,bh:1,bi:1,bj:1,bm:1,bn:1,bo:1,br:1,bs:1,bt:1,bv:1,bw:1,by:1,bz:1,ca:1,cc:1,cf:1,cd:1,ch:1,ci:1,ck:1,cl:1,cm:1,cn:1,cq:1,cr:1,cu:1,cv:1,cx:1,cy:1,cz:1,de:1,dj:1,dk:1,dm:1,"do":1,dz:1,ec:1,ee:1,eg:1,eh:1,er:1,es:1,et:1,ev:1,fi:1,fj:1,fk:1,fm:1,fo:1,fr:1,ga:1,gd:1,ge:1,gf:1,gg:1,gh:1,gi:1,gl:1,gm:1,gn:1,gp:1,gr:1,gs:1,gt:1,gu:1,gw:1,gy:1,hk:1,hm:1,hn:1,hr:1,ht:1,hu:1,id:1,ie:1,il:1,im:1,"in":1,io:1,iq:1,ir:1,is:1,it:1,jm:1,jo:1,jp:1,je:1,ke:1,kg:1,kh:1,ki:1,km:1,kn:1,kp:1,kr:1,kw:1,ky:1,kz:1,la:1,lb:1,lc:1,li:1,lk:1,lr:1,ls:1,lt:1,lu:1,lv:1,ly:1,ma:1,mc:1,md:1,me:1,mg:1,mh:1,mk:1,ml:1,mm:1,mn:1,mo:1,mp:1,mq:1,mr:1,ms:1,mt:1,mu:1,mv:1,mw:1,mx:1,my:1,mz:1,na:1,nc:1,ne:1,nf:1,ng:1,ni:1,nl:1,no:1,np:1,nr:1,nt:1,nu:1,nz:1,om:1,qa:1,pa:1,pe:1,pf:1,pg:1,ph:1,pk:1,pl:1,pm:1,pn:1,pr:1,pt:1,pw:1,py:1,re:1,rs:1,ro:1,ru:1,rw:1,sa:1,sb:1,sc:1,sd:1,se:1,sg:1,sh:1,si:1,sj:1,sk:1,sl:1,sm:1,sn:1,so:1,sr:1,st:1,sv:1,su:1,sy:1,sz:1,sx:1,tc:1,td:1,tf:1,tg:1,th:1,tj:1,tk:1,tl:1,tm:1,tn:1,to:1,tr:1,tt:1,tv:1,tw:1,tz:1,ua:1,ug:1,uk:1,um:1,us:1,uy:1,uz:1,va:1,vc:1,ve:1,vg:1,vi:1,vn:1,vu:1,wf:1,ws:1,ye:1,yt:1,za:1,zm:1,zw:1};function O(e){var t=e.msg,r=void 0===t?"":t,n=e.showFooter,o=void 0!==n&&n,a=e.type,i=void 0===a?"warn":a,c=window.console;if(c&&c.log&&r){var s="error"===i?"color:#F86161":"color:#e80",u="%c[天眼探针内部".concat("error"===i?"错误":"提醒","]");r.indexOf("\n")>-1?(c.log(u,s),r.split("\n").forEach((function(e){e&&c.log(e)}))):c.log("".concat(u,": ").concat(r),s),o&&c.log("探针初始化失败, 请查看文档【https://open.mingyuanyun.com/docs/fast】")}}function k(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}function x(e){return e&&"[object Object]"===Object.prototype.toString.call(e)}function E(e){return e&&"[object Function]"===Object.prototype.toString.call(e)}function S(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return e instanceof Error}}function j(e){return"[object ErrorEvent]"===Object.prototype.toString.call(e)}function T(e){return"[object DOMError]"===Object.prototype.toString.call(e)}function D(e){return"[object DOMException]"===Object.prototype.toString.call(e)}function P(e){return"[object String]"===Object.prototype.toString.call(e)}var L,A=(L="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=","function"==typeof window.btoa?window.btoa:function(e){for(var t,r,n,o,a="",i=(e=String(e)).length%3,c=0;c<e.length;){if(r=e.charCodeAt(c++),n=e.charCodeAt(c++),o=e.charCodeAt(c++),r>255||n>255||o>255)return O({msg:"探针内部异常encodeB64失败\nThe string to be encoded contains characters outside of the Latin1 range"}),e;a+=L.charAt((t=r<<16|n<<8|o)>>18&63)+L.charAt(t>>12&63)+L.charAt(t>>6&63)+L.charAt(63&t)}return i?a.slice(0,i-3)+"===".substring(i):a});function I(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function C(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(0!==r.length){var o=k(r[0])?r[0]:r;o.forEach((function(t){try{delete e[t]}catch(r){}}))}}function R(e,t){try{return null===e||e===undefined?null:function(e,t){if(t&&"string"==typeof t)try{if(-1===t.indexOf("."))return e&&e[t]!==undefined?e[t]:null;for(var r=t.split("."),n=e,o=0,a=r.length;null!==n&&n!==undefined&&o<a;)n=n["".concat(r[o++])];return o&&o===a?n:null}catch(i){return null}return null}(e,t)}catch(r){}return null}function N(e){return e.replace(/((password|passwd|passcode|pwd|secret|token|auth|key|cert|signature|sign|cipher|iv|salt|hash|hmac)["']?\s*[:=]\s*["']?)([^"'&,}]+)(["'&,}]+|\b)/gi,(function(e,t,r,n,o){return"".concat(t,"**").concat(o)}))}function $(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1];return e>0?t?Math.round(e):e:0}function F(e){if("function"==typeof Number.isNaN)return Number.isNaN(e);try{return window.isNaN(e)}catch(t){return!1}}function q(e){if("function"==typeof Number.parseFloat)return Number.parseFloat(e);try{return window.parseFloat(e)}catch(t){return+e}}function z(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:2;return F(+e)?0:q((+e).toFixed(t))}function M(e){return function(){return"function ".concat(e,"() { [native code] }")}}function U(e){for(var t=0,r=0;r<e.length;r++){var n=e.charCodeAt(r);n<127?t++:t+=n>=128&&n<=2047?2:n>=2048&&n<=65535?3:4}return t}function B(){var e={registUser:function(){return O({msg:"探针registUser方法调用无效!",showFooter:!0})},setBasicInfo:function(){return O({msg:"探针setBasicInfo方法调用无效!",showFooter:!0})},report:function(){return O({msg:"探针report方法调用无效!",showFooter:!0})},reportError:function(){return O({msg:"探针reportError方法调用无效!",showFooter:!0})},reportLoaded:function(){return O({msg:"探针reportLoaded方法调用无效!且该方法已移除!",showFooter:!0})},clearLogStore:function(){return O({msg:"探针clearLogStore方法调用无效!",showFooter:!0})},printDebug:function(){return O({msg:"探针printDebug方法调用无效!",showFooter:!0})}};return e.registUser.toString=M("registUser"),e.setBasicInfo.toString=M("setBasicInfo"),e.report.toString=M("report"),e.reportError.toString=M("reportError"),e.reportLoaded.toString=M("reportLoaded"),e.clearLogStore.toString=M("clearLogStore"),e.printDebug.toString=M("printDebug"),e}function H(e,t,r){if(e&&"function"==typeof r){var n=e[t];if(!n||!n._fast_wrapped_){var o=r(n);if(o)return o.__fast_wrapped__=!0,o.toString=M(t),e[t]=o,o}}return!1}function J(e){return"string"==typeof e&&(e=e.replace(/(%[0-9a-f]{2})+/gi,(function(e){var t;try{t=decodeURIComponent(e)}catch(r){t=unescape(e)}return t}))),e}function G(e){return e&&"string"==typeof e.tagName?e.tagName.toLowerCase():""}function W(e){var t=(e||"").replace(/^[a-zA-Z]+:\/\//,"");if(t){var r=t.split("."),n=r.length-1;for(1===b[r[n]]&&(n-=1);n>-1;n--)if(1!==w[r[n]])return r[n]}return""}function V(e){var t=e.curr_hash,r=e.curr_search,n=e.curr_href,o=r,a=n.replace(/(^[a-zA-Z]+:\/\/[^/]*)[\s\S]*/,"$1"),i=a.replace(/^[a-zA-Z]+:\/\//i,""),c=n.replace(a,"");if(window.cordova&&(c=(c=c.replace(new RegExp("^".concat(h)),"")).replace(new RegExp("^".concat(g)),"")),t)if(0===t.indexOf("#/")){var s=c.replace(/([^#]*#\/[^#?]*)([#?][\s\S]*)?/,"$2");c=c.replace(/([^#]*#\/[^#?]*)([#?][\s\S]*)?/,"$1"),o=s&&s.indexOf("?")>-1?s.replace(/[^?]*(\?[^#?]*)([#?][\s\S]*)?/,"$1"):""}else c=c.replace(/#[\s\S]*/,"").replace(/\?[\s\S]*/,""),!o&&n.indexOf("?")>-1&&(o=n.replace(/[^?]*(\?[^#?]*)([#?][\s\S]*)?/,"$1"));else c=c.replace(/\?[\s\S]*/,"");return{hash:t,href:n,fixPathname:c,search:o?o.replace(/^\??([\s\S]+)$/,"$1"):"",domain:i}}function Z(e){var t=e?e.curr_href:document&&document.referrer;return"string"!=typeof t?"":(window.cordova&&(t=(t=t.replace(new RegExp("^[a-zA-Z]+://([\\w\\.\\-]+(:\\d+)?)?".concat(h)),"")).replace(new RegExp("^[a-zA-Z]+://".concat(g)),"")),t)}function K(){var e,t=(null===(e=document)||void 0===e?void 0:e.location)||{},r=t.href;return{curr_hash:t.hash||"",curr_search:t.search||"",curr_href:r||""}}function X(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[],r=t.length;if(!e||0===r)return!1;for(var n=0;n<r;n++){var o=t[n];try{if("string"!=typeof o)continue;if(new RegExp(o).test(e))return!0}catch(a){continue}}return!1}function Q(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"",t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"",r=(e||window.location.href).replace(/^[^?]+\?([^?#]+).*$/,"$1"),n=r?r.split("&"):[],o=n.length;if(o>0){for(var a={},i=0;i<o;i++){var c=n[i].indexOf("="),s=n[i].substr(0,c),u=n[i].substr(c+1);if(s&&u){if(t&&s===t)return J(u);a[s]=J(u)}}return t?"":a}return t?"":{}}function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function te(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"",r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"",n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"",o=arguments.length>4&&arguments[4]!==undefined?arguments[4]:{};return o=o||{},"body"===G(e)&&o[n]?o:"function"==typeof e.getAttribute?([t,r,n].forEach((function(t){if(!o[t]){var r=e.getAttribute(t);r&&(o[t]=r)}})),o[t]&&o[r]&&o[n]||!e.parentNode||(o=ee(ee({},o),te(e.parentNode,t,r,n,o))),o):o}function re(e,t){return!!(e&&e.parentNode&&e.parentNode.children)&&(t=t&&t.join?t:[],"body"===e.nodeName.toLowerCase()||1!==e.nodeType?(t.unshift("body"),t.join(" > ")):(t.unshift(function(e){var t=e.parentNode&&9===e.parentNode.nodeType?-1:function(e){var t=[].indexOf;if(!e.parentNode)return-1;var r=e.parentNode.children;if(!r)return-1;var n=r.length;if(t)return t.call(r,e);for(var o=0;o<n;++o)if(e===r[o])return o;return-1}(e);return e.id?"#".concat(e.id):G(e)+(~t?":nth-child(".concat(t+1,")"):"")}(e)),e.id?t.join(" > "):re(e.parentNode,t)))}function ne(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,r="string"==typeof e.tagName?e.tagName.toUpperCase():"";if(e.childNodes.length>0&&t<3&&"TEXTAREA"!==r){for(var n=[],o=[],a=e.childNodes.length,c=0;c<a;c++)1===e.childNodes[c].nodeType&&e.childNodes[c].childNodes.length>0?o.push(e.childNodes[c]):3===e.childNodes[c].nodeType&&e.childNodes[c].nodeValue&&n.push(e.childNodes[c].nodeValue);for(var s=o.length,u=0;u<s;u++){var f=t>0?t+1:n.length>0?1:0,l=ne(o[u],f);l.length>0&&n.push.apply(n,i(l))}return n}return[]}var oe=function(e){s(document,"click",(function(t){var r=t||window.event;if(!r)return!1;var n=r.target||r.srcElement,o=G(n);if(!o||"body"===o||"html"===o||!n.parentNode||!n.parentNode.children)return!1;var a=te(n,e.conf.log_event_attribute,e.conf.log_content_attribute,e.conf.log_module_attribute),i=a[e.conf.log_content_attribute]||"",c=a[e.conf.log_event_attribute]||"",s=a[e.conf.log_module_attribute]||"",u=re(n),f={g:{et:o,ec:ne(n).join("").replace(/\s/g,"").slice(0,256),ep:u}};return(i||"number"==typeof i)&&(f.l=i),s&&(f.m=s),y.indexOf(c)>-1?c="user-defined-".concat(c):c||(c=y[3]),e.createLog(c,f),!0}))};function ae(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1,t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return Math.floor(Math.random()*(e-t)+t)}var ie=function(){for(var e=function(){var e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&window.msCrypto.getRandomValues.bind(window.msCrypto);if(e){var t=new Uint8Array(16);return function(){return e(t),t}}var r=[];return function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}(),t=function(e){for(var t=(e=unescape(encodeURIComponent(e))).length,r=[],n=0;n<t;n++)r[n]=e.charCodeAt(n);return r}(window.navigator.userAgent),r=t.length,n=[],o=0;o<256;++o)n[o]=(o+256).toString(16).substr(1);var a=(new Date).getTime(),i=0,c=0;return function(){var o=e(),s=0,u=[],f=[1|o[0],o[1],o[2]],l=1e5*(new Date).getTime();performance&&"function"==typeof performance.now&&(l=+"".concat(1e5*(a+performance.now())).replace(/\.\d*/g,""));var d=l.toString(16),p=c+1;(l-i<=0||l>i)&&(p=0),i=l,c=p;var g,h,_=(1e4*(268435455&(l+=122192928e5))+p)%4294967296;return u[s++]=_>>>16&255,u[s++]=_>>>8&255,u[s++]=255&p,u[s++]=f[0],u[s++]=f[1],u[s++]=f[2],u[s++]=255&t[ae(r)],u[s++]=255&t[ae(r)],u[8]=255&t[ae(r)],"".concat(d,"-").concat((g=u,h?[n[g[2]],n[g[Math.floor(3*Math.random())+3]],n[g[Math.floor(3*Math.random())+6]]].join(""):[n[g[0]],n[g[1]],n[g[2]],n[g[3]],n[g[4]],"-",n[g[5]],n[g[6]],n[g[7]],n[g[8]],n[g[9]]].join("")))}}(),ce=function(e){e.curr_pgsted=0,e.createLog(y[2],null,1);var t=function(t){clearTimeout(e.ps_timer),t&&(e.ps_timer=setTimeout((function(){var t=(new Date).getTime();e.curr_pgsted=1,e.createLog(y[0],{g:{du:t-e.page_enter}})}),f))};if(e.conf.is_spa){var r=function(){e.fmpInstance&&e.fmpInstance.stop(),e.fmpInstance&&e.fmpInstance.leaveExcute(),e.fmpInstance&&e.fmpInstance.start(),"function"==typeof performance.getEntriesByType&&(e.last_resource=performance.getEntriesByType("resource").length-1);var r=(new Date).getTime();e.curr_pgsted||(e.curr_pgsted=1,e.createLog(y[0],{g:{du:r-e.page_enter}})),e.page_enter=r;var n=K();e.prev_page=Z(e),e.curr_pid=ie(),e.curr_hash=n.curr_hash,e.curr_search=n.curr_search,e.curr_href=n.curr_href,e.curr_pgsted=0,e.curr_pgl=0,e.createLog(y[2]),t(!0)},n=window.navigator.userAgent;if((-1===n.indexOf("Android 2.")&&-1===n.indexOf("Android 4.0")||-1===n.indexOf("Mobile Safari")||-1!==n.indexOf("Chrome")||-1!==n.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history){var o=function(e,t){var n=e[t];"function"!=typeof n||e[t].__fast_wrapped__||(e[t]=function(t,o,a){if(!a||"string"!=typeof a)return n.call(e,t,o);var i=n.call(e,t,o,a);return r(),i},e[t].toString=M(t),e[t].__fast_wrapped__=!0)};o(window.history,"pushState"),o(window.history,"replaceState"),s(window,"popstate",r)}else s(window,"hashchange",r)}t(!0),s(window,"beforeunload",(function(){var r=(new Date).getTime();e.curr_pgsted||(e.curr_pgsted=1,e.createLog(y[0],{g:{du:r-e.page_enter}},2)),e.page_enter=r,e.last_api=-1,t(!1)}))};function se(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(u){return void r(u)}c.done?t(s):Promise.resolve(s).then(n,o)}function ue(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){se(a,n,o,i,c,"next",e)}function c(e){se(a,n,o,i,c,"throw",e)}i(undefined)}))}}var fe=r(757),le=r.n(fe);function de(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}var pe={read:function(e){return e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};var ge=function qt(e,t){function r(r,n,o){if("undefined"!=typeof document){"number"==typeof(o=de({},t,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),r=encodeURIComponent(r).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),n=e.write(n,r);var a="";for(var i in o)o[i]&&(a+="; "+i,!0!==o[i]&&(a+="="+o[i].split(";")[0]));return document.cookie=r+"="+n+a}}return Object.create({set:r,get:function(t){if("undefined"!=typeof document&&(!arguments.length||t)){for(var r=document.cookie?document.cookie.split("; "):[],n={},o=0;o<r.length;o++){var a=r[o].split("="),i=a.slice(1).join("=");'"'===i[0]&&(i=i.slice(1,-1));try{var c=pe.read(a[0]);if(n[c]=e.read(i,c),t===c)break}catch(s){}}return t?n[t]:n}},remove:function(e,t){r(e,"",de({},t,{expires:-1}))},withAttributes:function(e){return qt(this.converter,de({},this.attributes,e))},withConverter:function(e){return qt(de({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}(pe,{path:"/"});function he(e,t){t&&e&&localStorage.setItem(e,JSON.stringify(t))}function _e(e){try{return JSON.parse(localStorage.getItem(e))}catch(t){return null}}function me(e){var t=e.conf,r=e.static_base,n="__fast_log:".concat(t.logstore),o=function(e,t){var r,n=_e(t);if(k(n)&&n.length>0)(r=e.log_store).push.apply(r,i(n));else if(x(n)&&1===n.closed&&k(n.logs)&&n.logs.length>0){var o;(o=e.log_store).push.apply(o,i(n.logs))}localStorage.removeItem(t)};if(r.at===_)o(e,n);else try{for(var a=localStorage.length,c=0;c<a;c++){var s=localStorage.key(c);s&&0===s.indexOf(n)&&o(e,s)}}catch(u){}}function ye(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[],r=arguments.length>2&&arguments[2]!==undefined&&arguments[2];if(k(t)){var n=e.conf,o=e.ins_id,a=e.static_base,c=a.at===_,s="__fast_log:".concat(n.logstore).concat(c?"":":".concat(o)),u={logs:t,t:(new Date).getTime()},f=_e(s);k(f)&&f.length>0?u.logs=[].concat(i(f),i(u.logs)):x(f)&&k(f.logs)&&f.logs.length>0&&(u.logs=[].concat(i(f.logs),i(u.logs))),r&&(u.closed=1),he(s,u)}}function ve(e){var t={expires:1e4};document&&document.location&&document.location.hostname&&(t.domain=document.location.hostname.replace(/^[^.]+\.(.+)/,".$1")),ge.set("__tracker_user_id__",e,t),localStorage.setItem("__tracker_user_id__",e)}function we(e){var t={};document&&document.location&&document.location.hostname&&(t.domain=document.location.hostname.replace(/^[^.]+\.(.+)/,".$1")),ge.set("__fast_sid__",e,t)}function be(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?be(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):be(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ke(e){var t=e.method,r=void 0===t?"GET":t,n=e.data,o=void 0===n?null:n,a=e.url,i=e.callback,c=e.success,s=e.customHeader,u=void 0===s?{}:s;if(a&&"string"==typeof a){r=r&&"string"==typeof r?r.toUpperCase():"GET";var f="undefined"!=typeof window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest?new XMLHttpRequest:"undefined"!=typeof window.XDomainRequest?new XDomainRequest:null;f&&("undefined"!=typeof window.XDomainRequest&&f instanceof window.XDomainRequest&&(a=a.replace(/^https?:/i,"")),f.open(r,a),"POST"!==r&&"PUT"!==r||!o||(o=JSON.stringify(o),f.setRequestHeader("Content-Type","application/json")),Object.getOwnPropertyNames(u).forEach((function(e){f.setRequestHeader(e,u[e])})),"function"==typeof c&&(f.onreadystatechange=function(){4!==f.readyState||200!==f.status&&304!==f.status||c(f.response)}),f.send(o)),"function"==typeof i&&i()}}function xe(e,t){var r=t.slice(),n=Oe(Oe({},e.static_base),e.hybrid_base),o=r.length;if(1===o)return{base:n,items:r};for(var a=Oe({},n),i=r[0],c=Object.getOwnPropertyNames(i),s=1;s<o;s++){if(0===c.length)break;for(var u=c.length-1;u>-1;u--){var f=c[u];r[s][f]!==undefined&&r[s][f]===i[f]||c.splice(u,1)}}if(c.length>0){for(var l=0;l<c.length;l++){var d=c[l];a[d]=i[d]}r=r.map((function(e){var t=Oe({},e);return C(t,c),t}))}return{base:a,items:r}}function Ee(e){if(k(e.log_store)&&e.log_store.length>0){var t=Object.getOwnPropertyNames(e.hybrid_rt);e.log_store=e.log_store.map((function(r){return t.forEach((function(t){r[t]||(r[t]=e.hybrid_rt[t])})),r.e!==y[5]&&C(r,"rom","ram"),r}))}}function Se(e,t,r){for(var n=e.length,o="",a=0;a<n;a++){var i=e[a];try{"url"===i?o=Q(r,t):"cookie"===i?o=ge.get(t):"window"===i?(o=window[t])===window&&(o=""):o="localstorage"===i?localStorage.getItem(t):sessionStorage.getItem(t)}catch(c){}if(o)break}return o}function je(e,t,r){for(var n=e.length,o="",a=0;a<n;a++){var i=e[a];if("url"!==i&&"cookie"!==i){try{if("window"===i)(o=R(window,t))===window&&(o="");else{var c=t.substring(0,r),s=t.substring(r+1),u="localstorage"===i?localStorage.getItem(c):sessionStorage.getItem(c);o=R(JSON.parse(u),s)}}catch(f){}if(o)break}}return o}function Te(e,t,r){var n=e.conf[t]||{},o=n.key,a=n.range;if(!k(o)||0===o.length||!k(a)||0===a.length)return"";try{for(var i=o.length,c="",s=0;s<i;s++){var u=o[s];if(u){var f=u.indexOf(".");c=f>-1?je(a,u,f):Se(a,u,r&&r.curr_href?r.curr_href:"")}if(c)break}return c||""}catch(l){}return""}function De(e){var t=(new Date).getTime().toFixed(3);return e.last_ts&&e.last_ts===t?e.ts_counter=+e.ts_counter+1:(e.last_ts=t,e.ts_counter=0),"".concat(t).concat(Array(4-"".concat(e.ts_counter).length).join("0")+e.ts_counter)}function Pe(e){if(window.cordova&&x(window.MFastLog)){var t=Oe({tn:e.insertData.tn||"",ru:e.insertData.ru||"",ug:e.insertData.ug||"",run:e.insertData.run||"",rur:e.insertData.rur||"",rup:e.insertData.rup||"",rubn:e.insertData.rubn||"",l:e.insertData.cd||{},ahv:e.insertData.ahv||"",sid:e.sid},e.static_base);x(e.hybrid_base)&&(t.afv=e.hybrid_base.afv),window.MFastLog.setExtraLogs(t)}}function Le(e,t){for(var r=t.length-1;r>-1;r--)if(e&&e.indexOf(t[r])>-1)return!0;return!1}function Ae(){return(Ae=ue(le().mark((function e(t,r){var n,o,a,i,c,s,u;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.static_base.at=_,n=window,o=n.MFastLog,t.hybrid_rt.ram="",t.hybrid_rt.rom="",t.hybrid_rt.nt="",t.hybrid_rt["do"]="",t.hybrid_base.dmf="",t.hybrid_base.dmd="",t.hybrid_base.afv=window.cordova&&window.cordova.version||"",t.hybrid_base.ir=0,t.hybrid_base.ca="",t.hybrid_base.ac="",t.hybrid_base.aid="",t.hybrid_base.av="",a=0,!x(o)){e.next=39;break}return e.next=18,new Promise((function(e){o.getBasicInformation((function(t){e(t)}))}));case 18:i=e.sent,t.hybrid_rt["do"]=i.device_orientation||"",t.hybrid_rt.ram=i.m_available_ram||"",t.hybrid_rt.rom=i.m_available_rom||"",t.hybrid_rt.nt=i.network||"",t.hybrid_base.dmf=i.device_manufacturer||"",t.hybrid_base.dmd=i.device_model||"",t.hybrid_base.ir=i.m_is_root||0,t.hybrid_base.ca=i.m_cpu_architectures||"",t.hybrid_base.ac=i.m_app_channel||"",t.hybrid_base.aid=i.m_app_id||"",t.hybrid_base.av=i.m_app_version||"",i.os_name&&(t.static_base.osn=i.os_name),i.os_version&&(t.static_base.osv=i.os_version),t.insertData.av=t.hybrid_base.av,a=i.start_timestamp||0,i.user_id&&(t.static_base.u=i.user_id,ve(i.user_id)),"function"==typeof o.setFastConfig&&o.setFastConfig({endpoint:t.conf.replay.endpoint?"".concat(t.conf.replay.endpoint).concat("prod"!==t.env?"?env=".concat(t.env):""):"",eventHashkey:t.conf.logstore||"",recordHashkey:t.conf.replay.logstore||""}),"function"==typeof o.setLogMaxSize&&o.setLogMaxSize(150,(function(){O({msg:"MFastLog的单个日志文件大小成功设置为150Kb (仅提示)"})}),(function(){O({msg:"MFastLog的单个日志文件大小设置失败,仍为默认200Kb (仅提示)"})})),Pe(t),P(t.hybrid_rt.nt)&&(t.hybrid_rt.nt=t.hybrid_rt.nt.toUpperCase());case 39:t.ha_inited=!0,t.last_hi=(new Date).getTime(),Ee(t),c=_e("__fast_last_start__")||{},s=!1,!F(+a)&&a>0?(s=c.t!==a,u="".concat(a,".000000"),c.t=a):(s=c.sid!==t.sid,u=+t.start_time.toFixed(6),c.sid=t.sid),s&&u&&(t.createLog(y[7],{t:"".concat(u)}),he("__fast_last_start__",c)),r();case 47:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ie(e,t){var r=[y[7],y[8],y[9]],n=[y[0],y[1],y[2],y[10]];return-1!==y.slice().indexOf(t)&&(r.indexOf(t)>-1?-1===e.indexOf("event"):n.indexOf(t)>-1?-1===e.indexOf("page"):t===y[4]?-1===e.indexOf("api"):-1===e.indexOf(t))}function Ce(e){var t=Object.getOwnPropertyNames(e),r="";return t.forEach((function(t){var n=!1;switch(t){case"is_spa":case"include_search":case"report_api_params":"boolean"!=typeof e[t]&&(n=!0,r+=e[t]===undefined?"":"参数".concat(t,"必须是布尔类型!\n"));break;case"api_url_regx":"string"!=typeof e[t]&&(n=!0,r+=e[t]===undefined?"":"参数".concat(t,"必须是字符串类型!\n"));break;case"log_content_attribute":case"log_event_attribute":case"log_module_attribute":"string"==typeof e[t]&&e[t]||(n=!0,r+=e[t]===undefined?"":"参数".concat(t,"必须是字符串类型且不能为空!\n"));break;case"capture_type":"number"!=typeof e[t]&&(n=!0,r+=e[t]===undefined?"":"参数".concat(t,"必须是数字类型!\n"));break;case"api_ignore_urls":case"ignore_pages":case"collect_event_types":if(k(e[t])||(n=!0,r+=e[t]===undefined?"":"参数".concat(t,"必须是数组类型!\n")),"api_ignore_urls"===t||"ignore_pages"===t){var o=[];e[t].forEach((function(e){var t=P(e)?e.replace(/^\s+|\s+$/g,""):"";t&&o.push(t)})),e[t]=o}break;case"tenant_reader":case"real_user_reader":case"user_group_reader":case"app_version_reader":case"real_user_name_reader":case"real_user_role_reader":case"real_user_post_reader":case"real_user_bu_name_reader":if(x(e[t])?P(e[t].key)&&k(e[t].range)?e[t].key=e[t].key?e[t].key.split("|").map((function(e){return e.replace(/^\s+|\s+$/g,"")})):[]:(n=!0,r+="参数".concat(t,"格式错误，请参照: { key: 'user', range: ['cookie'] }\n")):(n=!0,r+=e[t]===undefined||null===e[t]?"":"参数".concat(t,"必须是对象类型!\n")),!n&&e[t].range.indexOf("window")>-1){var a="";e[t].key.forEach((function(e){R(window,e)===window&&(a+=a?",".concat(e):e)})),a&&(r+="参数".concat(t,"中存在key: ").concat(a,"因在window中查询结果仍然为window，将在window的查找中被忽略\n"))}break;case"trace_config":x(e[t])?null!==e[t]&&(e[t].tid_type=String(e[t].tid_type),"skywalking"!==e[t].tid_type&&"fast"!==e[t].tid_type&&(e[t].tid_type="fast"),k(e[t].rules)&&k(e[t].headers)?k(e[t].headers)&&(e[t].headers=function(e,t){for(var r="skywalking"===t?"sw8":m,n=["accept-charset","accept-encoding","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","referer","te","trailer","transfer-encoding","upgrade","user-agent","via",/^proxy-/i,/^sec-/i],o=e.length,a=[],i={},c={},s=0,u=0;s<o;s++){var f=e[s]||{},l=f.name,d=f.type,p=f.value;if(l&&p&&("built-in"===d||"static"===d)&&c[l]===undefined){for(var g=n.length-1;g>-1;g--)if("string"==typeof n[g]){if("".concat(l).toLowerCase()===n[g])continue}else if(n[g].test(l))continue;if("built-in"===d){if(i[p])continue;i[p]=1}c[l]=u++,a.push({name:l,type:d,value:p})}}if(!i.tid){var h=c[r];h!==undefined&&a.splice(h,1),a.push({name:r,type:"built-in",value:"tid"})}return a}(e[t].headers,e[t].tid_type)):(n=!0,r+="参数".concat(t,"格式错误，请参照: { tid_type: 'fast', rules: ['http://fast.mypaas.com.cn'], headers: [{ type: 'built-in', name: ").concat(m,", value: 'trace_id' }] }\n"))):(n=!0,r+=e[t]===undefined||null===e[t]?"":"参数".concat(t,"必须是对象类型!\n"));break;case"replay":case"debug":case"product":case"app":case"endpoint":case"logstore":case"accessKey":break;case"enable":1!==e[t]&&0!==e[t]&&(e[t]=1);break;default:n=!0,r+="参数".concat(t,"不属于探针的配置项\n")}n&&e[t]!==undefined&&delete e[t]})),r&&O({msg:r+="以上仅提示，不影响探针运行"}),e}function Re(e,t){var r=t||e,n=V(r),o=n.domain,a=n.fixPathname,i=n.search,c=e.prev_page||"";if(0===c.indexOf(o)&&!e.conf.include_search){var s=c.indexOf("?");s>0&&(c=c.substring(0,s))}var u={d:o?J(o):"",pg:a?J(a):"",pid:e.curr_pid,ps:e.conf.include_search&&i?J(i):"",te:document.title||a,r:c?J(c):"",sid:e.sid,a:window.__fastTrackerAppName__?"".concat(window.__fastTrackerAppName__):e.insertData.a};e.regu_called?v.forEach((function(t){var r=t.sn;u[r]=e.insertData[r]||""})):v.forEach((function(t){var n=t.c,o=t.sn;e.conf[n]&&(u[o]=Te(e,n,r),e.insertData[o]=u[o])})),e.hybrid_base.av&&P(e.hybrid_base.av)?u.av=e.hybrid_base.av:e.conf.app_version_reader&&(u.av=Te(e,"app_version_reader",r)||e.insertData.av),e.insertData.ahv&&(u.ahv=e.insertData.ahv);var f=(new Date).getTime();return f-e.last_sync>=12e4&&(Pe(e),e.last_sync=f),u}function Ne(e,t){var r=arguments.length>2&&arguments[2]!==undefined&&arguments[2],n=e.r,o=e.d,a={};if(!r&&n){var i=Q(n);if(Object.getOwnPropertyNames(i).length>0&&(a.referrer_params=JSON.stringify(i)),a.referrer_domain=0===n.indexOf("file://")?"/":n.replace(/(^[a-zA-Z]+:\/\/[^/]*)[\s\S]*/,"$1"),"/"!==a.referrer_domain&&"/"!==o){var c=W(a.referrer_domain),s=W(o);/^[a-zA-Z]+:\/\/((.*\.baidu\.com$)|(.*\.bing\.com$)|(www\.google\.com$)|(www\.google\.com\.[a-z]{2}$)|(www\.google\.[a-z]{2}$)|(m\.sm\.cn$)|(.+\.so\.com$)|(.*\.sogou\.com$)|(.*\.yahoo\.com$)|(so\.toutiao\.com$))/i.test(a.referrer_domain)?a.traffic_source="搜索引擎":a.traffic_source=c===s?"直接访问":"外部链接"}else a.traffic_source="直接访问"}else a.traffic_source="直接访问";if(t&&t.indexOf("?")>-1){var u=Q(t);["utm_source","utm_medium","utm_campaign","utm_content","utm_term"].forEach((function(e){u[e]&&(a[e]=u[e])}))}return a}function $e(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;if(t||2===r){var n=new Image,o=function(){n.onload=null,n.onerror=null,n=undefined};n.onload=o,n.onerror=o,n.crossOrigin="anonymous",n.src=e}else ke({url:e})}function Fe(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;if(1===e.conf.enable)try{t&&e.log_store.push(t);var n="".concat(e.conf.endpoint,"/").concat(e.conf.logstore,"?env=").concat(e.env),o=e.log_store.slice(),a=window.MFastLog||{},i=a.writeToFile,c=a.startUploadLog,s="function"==typeof i&&"function"==typeof c,f=e.static_base.at===_,l=x(s)?50:10,d=o.length,p=(new Date).getTime();if(d>0){var g;if(f&&!e.ha_inited||0===r&&d<l)return;e.log_store=[];var h=(null===(g=window.navigator.connection)||void 0===g?void 0:g.type)||"";if(s&&!/(wifi|4g|cellular)/i.test(h))if(2===r)ye(e,o,!0);else{var m=xe(e,o),y=JSON.stringify(m);clearTimeout(e.wfile_timer),i(y,"event",(function(){r>0&&p-e.last_sul>12e4&&(e.last_sul=p,e.wfile_timer=setTimeout(c,u))}),(function(e){O({msg:"探针内部异常向MFastLog写入事件日志出错\n".concat(e)})}))}else{s&&p-e.last_sul>12e4&&(e.last_sul=p,e.wfile_timer=setTimeout(c,u));var v=16256,w=xe(e,o),b="".concat(n,"&data=").concat(encodeURIComponent(JSON.stringify(w))),k=U(b);if(k<v)$e(b,e.curr_pgl,r);else if(2!==r)ke({url:n,method:"POST",data:w});else{for(var E=U("".concat(n,"&data=&items=&base=").concat(encodeURIComponent(JSON.stringify(Oe(Oe({},e.static_base),e.hybrid_base))))),S=[],j=0,T=0;j<d;j++){var D=o[j],P=U(encodeURIComponent(JSON.stringify([D])));if(P+E>=v){var L=xe(e,[D]);"function"==typeof navigator.sendBeacon?navigator.sendBeacon(n,L):ke({url:n,method:"POST",data:L})}else if(T+=P,S.push(D),T+E>=v){var A=xe(e,S),I="".concat(n,"&data=").concat(encodeURIComponent(JSON.stringify(A)));$e(I,e.curr_pgl,r),T=0,S=[]}}if(S.length>0){var C=xe(e,S),R="".concat(n,"&data=").concat(encodeURIComponent(JSON.stringify(C)));$e(R,e.curr_pgl,r)}}}}}catch(N){O({msg:"探针内部异常上报日志出错\n".concat(N)})}}function qe(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return ze(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ze(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r["return"]||r["return"]()}finally{if(c)throw a}}}}function ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Me(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Be(e){if(e&&"string"==typeof e){var t=document.createElement("base");return t.href=e,t.href}return window.location.href}function He(e,t){var r="";if(t)try{var n=e.match(new RegExp(t));n&&(r=n[1]||n[0]||"")}catch(o){r=""}return r}function Je(e,t,r){var n="",o="";t&&"string"==typeof t&&t.indexOf("?")>-1&&(n=t.substring(t.indexOf("?")+1)||"")&&(n=J(N(n))),r&&"function"==typeof r.toString&&(0===(o=r.toString()||"").indexOf("[object")?o="":o&&(o=J(N(o))));var a=JSON.stringify(e);return U("".concat(a).concat(n).concat(o))>14336&&(o="-",U("".concat(a).concat(n))>14336&&(n="-")),{request_query:n,request_body:o}}function Ge(e,t){var r=t.conf||{},n=r.endpoint,o=void 0===n?"":n,a=r.api_ignore_urls,i=r.replay,c=[o,"aliyuncs.com","growingio.com","sensorsdata.cn","hm.baidu.com","google-analytics.com","tingyun.com","lr-ingest.io","r.lr-in-prod.com","logrocket.io","gateway-test.myscrm.cn/event-proxy/proxy/publish","gateway-release.myscrm.cn/event-proxy/proxy/publish","gateway.myscrm.cn/event-proxy/proxy/publish"];i&&i.endpoint&&P(i.endpoint)&&c.unshift(i.endpoint);var s=k(a)?a.length:0;if(!e||"string"!=typeof e)return!1;for(var u=0;u<c.length;u++){var f=c[u];if(e.indexOf(f)>-1)return!0}for(var l=0;l<s;l++){var d=a[l];try{if(d&&d.constructor===RegExp&&d.test(e)||"string"==typeof d&&new RegExp(d).test(e))return!0}catch(p){continue}}return!1}function We(e,t){try{var r=function(e){try{var t={};return e.transferSize>0?t.size=e.transferSize:e.decodedBodySize>0?t.size=e.decodedBodySize:e.encodedBodySize>0&&(t.size=e.encodedBodySize),e.duration>0?t.du=$(e.duration,!0):e.responseEnd>0&&(e.fetchStart>0||e.startTime>0)&&(t.du=$(e.responseEnd-(e.fetchStart>0?e.fetchStart:e.startTime),!0)),(e.connectStart>0||e.requestStart>0)&&e.fetchStart>0&&(t.qas=$((e.connectStart>0?e.connectStart:e.requestStart)-e.fetchStart,!0)),e.connectEnd>0&&e.connectStart>0&&(t.ic=$(e.connectEnd-e.connectStart,!0)),e.responseStart>0&&e.requestStart>0&&(t.wt=$(e.responseStart-e.requestStart,!0)),e.responseEnd>0&&e.responseStart>0&&(t.ctd=$(e.responseEnd-e.responseStart,!0)),t}catch(r){return{}}}(t);r.size!==undefined&&(e.g.size=r.size),r.du!==undefined&&(e.g.du=r.du),r.qas!==undefined&&(e.g.qas=r.qas),r.ic!==undefined&&(e.g.ic=r.ic),r.wt!==undefined&&(e.g.wt=r.wt),r.ctd!==undefined&&(e.g.ctd=r.ctd)}catch(n){O({msg:"探针内部异常合并API阶段数据失败\n".concat(e.g.api,"\n").concat(n.message)})}}function Ve(e,t){try{t.use_trace?"string"==typeof t.use_trace&&t.use_trace&&(t.g.tid=t.use_trace):delete t.g.tid,t.g.regxApiUrl&&(t.g.api=t.g.regxApiUrl),delete t.g.regxApiUrl,delete t.use_trace,e.createLog(y[4],Ue({},t))}catch(r){}}function Ze(e,t){clearTimeout(e.api_timer),-1===e.api_que.indexOf(t.g.tid)&&(e.api_que.push(t.g.tid),e.api_cache[t.g.tid]=Ue({},t)),e.api_timer=setTimeout((function(){var t=e.api_que.slice(),r=t.length;if(e.api_que.splice(0,r),"function"==typeof performance.mark&&"function"==typeof performance.getEntries){var n=e.last_api,o=[];performance.getEntries().slice(n+1).forEach((function(t){var r="mark"===t.entryType&&0===t.name.indexOf("fast-tracker-api"),a="resource"===t.entryType&&("xmlhttprequest,fetch".indexOf(t.initiatorType)>-1||window.navigator.userAgent.indexOf("Android")>-1&&""===t.initiatorType)&&!Ge(J(t.name),e);(r||a)&&o.push(t),n+=1}));for(var a=o.length,i=0;i<a;){var c=o[i];if(c&&"mark"===c.entryType){var s=c.name.split("|$|"),u=s[1],f=s[2];if(u&&f&&e.api_cache[u]){for(var l=1;i+l<a&&o[i+l]&&"mark"!==o[i+l].entryType;){var d=o[i+l];if(d&&d.name===f){e.api_perfCache[u]=d;break}l++}i+=l}else i++}else i++}e.last_api=n}for(var p=0;p<r;p++){var g=t[p],h=e.api_cache[g];if(g&&h){var _=Ue({},h),m=e.api_perfCache[g];m&&We(_,m),Ve(e,_);try{e.api_cache[g]=null,delete e.api_cache[g],e.api_perfCache[g]=null,delete e.api_perfCache[g]}catch(y){}}}}),1150)}function Ke(e,t){switch(t){case"u":return e.static_base.u;case"dsw":return e.static_base.dsw;case"dsh":return e.static_base.dsh;case"ua":return e.static_base.ua;case"tn":return e.insertData.tn;case"ru":return e.insertData.ru;case"ug":return e.insertData.ug;case"dmf":return e.hybrid_base.dmf;case"dmd":return e.hybrid_base.dmd;case"ac":return e.hybrid_base.ac;case"aid":return e.hybrid_base.aid;case"av":return e.insertData.av;case"ahv":return e.insertData.ahv;default:return""}}function Xe(e,t,r){var n=[];try{var o=e.conf.trace_config||{},a=o.rules,i=o.headers,c=new RegExp(/(\w+):\/\/([^/]+)/),s=t.match(c),u=s?s[0]:t;if(k(a)&&a.length>0&&k(i)&&i.length>0){for(var f=!1,l=a.length-1;l>-1;l--){var d=a[l].replace(/\./g,"\\.").replace(/\?/g,".").replace(/\*/g,".*");if(d&&"string"==typeof d&&new RegExp(d).test(u)){f=!0;break}}if(f)for(var p=i.length,g=function(e){return"\\u"===e?"%u":escape(e)},h=0;h<p;h++){var _=i[h]||{},m=_.name,y=_.type,v=_.value;if(m&&v&&("static"===y||"built-in"===y)){var w="static"===y?v:"tid"===v?r:Ke(e,v);null!==w&&w!==undefined&&""!==w&&n.push({name:m,value:"".concat(w).replace(/[^\x00-\xff]|\\u/g,g)})}}}}catch(b){}return n}function Qe(e,t,r){var n=String(A(r)),o=String(A(ie())),a=String(A(e.static_base.a)),i=String(A(t.av)),c=String(A(t.pg)),s=String(A(t.d.replace(/^\w+:\/\//i,"")));return"".concat(1,"-",n,"-").concat(o,"-0-").concat(a,"-").concat(i,"-").concat(c,"-").concat(s)}var Ye,et=function(e){var t="undefined"!=typeof window?window:"undefined"!=typeof r.g?r.g:{},n="fetch",o="XMLHttpRequest",a="function"==typeof performance.mark&&"function"==typeof performance.getEntries;if("function"==typeof t[n]&&!t[n].__fast_wrapped__&&!t[n].polyfill){t.ofetch=t[n];H(t,n,(function(r){return function(o,i){for(var c=arguments.length,s=new Array(c>2?c-2:0),u=2;u<c;u++)s[u-2]=arguments[u];var f=1===arguments.length?[o]:[o,i].concat(s);if(!i||"HEAD"===i.method||"no-cors"===i.mode)return r.apply(t,f);var l=(o&&"string"!=typeof o?o.url:o)||"";if(!l||Ge(l,e)||-1===e.conf.collect_event_types.indexOf(y[4])||X(window.location.href,e.conf.ignore_pages)||r.polyfill||t[n].polyfill)return r.apply(t,f);var d=Ue(Ue({},Re(e)),{},{t:De(e)}),p="",g="";if(e.conf.report_api_params){var h=Je(d,l,i.body);p=h.request_query,g=h.request_body}var _=new Date,v="fast-".concat(ie()),w="skywalking"===e.conf.trace_config.tid_type?Qe(e,d,v):v,b=He(l,e.conf.api_url_regx),k=Be(l),E=Xe(e,k,w),S=E.length>0;if(S)try{for(var j={},T=E.length-1;T>-1;T--){var D=E[T],P=D.name,L=D.value;j[P]=L}if(x(f[1]))if(f[1]=Ue({},f[1]),f[1].headers)if("[object Headers]"===Object.prototype.toString.call(f[1].headers)&&"function"==typeof f[1].headers.keys){var A,I=qe(f[1].headers.keys());try{for(I.s();!(A=I.n()).done;){var C=A.value;j[C]=f[1].headers.get(C)}}catch(R){I.e(R)}finally{I.f()}}else j=Ue(Ue({},j),f[1].headers);else f[1].headers={};else f[1]={headers:{}};f[1].headers=j}catch(N){O({msg:"探针内部异常拦截fetch过程中添加请求头失败\n".concat(N)})}return a&&performance.mark("fast-tracker-api|$|".concat(v,"|$|").concat(k)),r.apply(t,f).then((function(t){var r=t.clone(),n=new Date-_,o=Ue({g:{regxApiUrl:b,api:k,du:n,m:i.method||"GET",tid:v}},d);S&&(o.use_trace=1);try{var a="".concat(r.headers.get(m)||"");if(a){var c=a.indexOf(",");o.use_trace=c>-1?a.slice(0,c):a}}catch(R){}return p&&(o.g.rq=p),g&&(o.g.rb=g),r.ok?r.arrayBuffer().then((function(t){o.g.ss=r.status||200,o.g.size=t&&t.byteLength?t.byteLength:0,Ze(e,o)})):r.arrayBuffer().then((function(t){o.g.ss=r.status||404,o.g.size=t&&t.byteLength?t.byteLength:0,Ze(e,o)})),t}))}}))}if("function"==typeof t[o]&&!t[o].__fast_wrapped__){var c=t[o],u=c.prototype,f=function(t){return function(r,n){for(var o=arguments.length,a=new Array(o>2?o-2:0),c=2;c<o;c++)a[c-2]=arguments[c];var s=1===arguments.length?[r]:[r,n].concat(a),u=n||"";u&&Ge(u,e)&&(u=""),this.__api_method__=(r||"get").toUpperCase(),this.__api_url__=u;try{return t.apply(this,s)}catch(f){return Function.prototype.apply.apply(t,[this].concat(i(s)))}}},l=function(t){return function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];var f=[].concat(n),l=this;if(l.__fast_tnow=new Date,l&&l.__api_url__&&e.conf.collect_event_types.indexOf(y[4])>-1&&!X(window.location.href,e.conf.ignore_pages)){var d=Ue(Ue({},Re(e)),{},{t:De(e)});if(l.__fast_requestQuery="",l.__fast_requestBody="",e.conf.report_api_params){var p=Je(d,l.__api_url__,f[0]);l.__fast_requestQuery=p.request_query,l.__fast_requestBody=p.request_body}l.__fast_traceId="fast-".concat(ie());var g="skywalking"===e.conf.trace_config.tid_type?Qe(e,d,l.__fast_traceId):l.__fast_traceId;l.__fast_regxApiUrl=He(l.__api_url__,e.conf.api_url_regx),l.__fast_fullApiUrl=Be(l.__api_url__),l.__fast_customHeaders=Xe(e,l.__fast_fullApiUrl,g);var h=l.__fast_customHeaders.length>0;if(h){var _=l.setRequestHeader;u&&u.setRequestHeader?_=u.setRequestHeader:c&&c.setRequestHeader&&(_=c.setRequestHeader);for(var m=l.__fast_customHeaders.length-1;m>-1;m--){var v=l.__fast_customHeaders[m],w=v.name,b=v.value;_.call(l,w,b)}}var O=function(t){var r=t.target;if(r&&4===r.readyState){var n,o=new Date-r.__fast_tnow;try{var a=r.response||r.responseText;n=a?P(a)?a.length:JSON.stringify(a).length:0}catch(l){n=0}var i,c=Ue({g:{regxApiUrl:r.__fast_regxApiUrl,api:r.__fast_fullApiUrl,du:o,m:r.__api_method__,size:n,tid:r.__fast_traceId}},d);h&&(c.use_trace=1);try{var s=r.getAllResponseHeaders();if(s.indexOf("x-fast-trace-id:")>-1){var u=s.replace(/^[\s\S]*x-fast-trace-id\:\s*([^,\r\n]+)[\s\S]*$/i,"$1");if(u){var f=u.indexOf(",");c.use_trace=f>-1?u.slice(0,f):u}}}catch(p){}r.__fast_requestQuery&&(c.g.rq=r.__fast_requestQuery),r.__fast_requestBody&&(c.g.rb=r.__fast_requestBody);try{i=r.status}catch(l){i=0}if(c.g.tid){i>=200&&i<300?(c.g.ss=i||200,Ze(e,c)):i>0&&(c.g.ss=i,Ze(e,c));try{r.__fast_traceId=""}catch(l){}}}};s(l,"readystatechange",O),a&&performance.mark("fast-tracker-api|$|".concat(l.__fast_traceId,"|$|").concat(l.__fast_fullApiUrl))}try{return t.apply(l,f)}catch(k){return Function.prototype.apply.apply(t,[l].concat(i(f)))}}};u?(H(u,"open",f),H(u,"send",l)):(t[o]=function(e){var t=new c(e);return H(t,"open",f),H(t,"send",l),t},Object.keys(c).forEach((function(e){I(c,e)&&!I(t[o],e)&&(t[o][e]=c[e])})),t[o].toString=M(o)),t[o].__fast_wrapped__=!0}},tt=function(e){var t=!1;if(window.cordova&&window.cordova.require){var r=window.cordova.require("cordova/channel");r&&r.onDeviceReady&&2===r.onDeviceReady.state&&(t=!0)}var n=function(){if(window.cordova){var t=window.MFastLog;if(x(t)){var r=e.conf.collect_event_types.indexOf(y[6])>-1;if("function"==typeof t.setLogLevelByJson){var n=["event"];e.conf.collect_event_types.indexOf(y[11])>-1&&n.push("anr"),r&&n.push("crash"),t.setLogLevelByJson(n)}}!function(e,t){Ae.apply(this,arguments)}(e,(function(){s(document,"pause",(function(){e.createLog(y[8],null,2)})),s(document,"resume",(function(){me(e),e.createLog(y[9])}))}))}};t?n():document.addEventListener("deviceready",n,!1)},rt=function(e,t,r){return{app:e.static_base.a,record_id:ie(),session_id:e.sid,page_id:e.curr_pid,record_type:t,time:r?r.timestamp:null,content:r?[r]:[]}},nt=(Ye=null,function(e){if(Ye)return Ye;try{var t=e.conf.replay||{},r=t.endpoint,n=t.logstore,o=t.error,a=t.all;if(E(window.$$fastRecord)&&r&&n&&(o||a)){var i=0,c=0,s=[],u=[];window.$$fastRecord({emit:function(t,r){if(i++,r)u.push(rt(e,0,t)),i=1;else if(3!==t.type)0===u.length?u.push(rt(e,0,t)):u[u.length-1].content.push(t);else{var n=u[u.length-1];i>102&&(u=function(e){if(k(e)&&e.length>0){for(var t=e.length-1;t>-1;t--)if(e[t]&&0===e[t].record_type)return e.slice(t);return e}return[]}(u)),0===n.record_type?u.push(rt(e,1,t)):(k(n.content)&&0===n.content.length&&(n.time=t.timestamp),n.content.push(t))}},inlineStylesheet:!0,sampling:{scroll:150,input:"last"},checkoutEveryNth:200}),Ye={caughtError:function(){var t=(new Date).getTime();if(c+500<t&&k(u)&&u.length>1){var o=[];s=[],u.forEach((function(e,t){var r;!e||0!==t&&0===e.record_type||(s.push(e.record_id),e.sended||(o.push({filename:(r=e,"".concat(r.record_type,"_[").concat(r.app,"]_").concat(r.session_id,"_").concat(r.page_id,"_").concat(r.record_id,"_").concat(r.time)),content:JSON.stringify(e)}),e.sended=1))})),u.push(rt(e,1,null)),c=t;var a=window.MFastLog||{},i=a.writeToFile,f=a.startUploadLog;if("function"==typeof i&&"function"==typeof f){var l=o.map((function(e){var t=e.filename,r=e.content;return{filename:"".concat(t,".txt"),filecontent:r}}));i(JSON.stringify(l),"record",(function(){f()}),(function(e){O({msg:"探针内部异常向MFastLog写入回放日志出错\n".concat(e)})}))}else ke({url:"".concat(r).concat("prod"!==e.env?"?env=".concat(e.env):""),method:"POST",customHeader:{hashkey:n},data:{data:o}})}return s},pidChanged:function(){},userExit:function(){}}}}catch(f){O({msg:"探针视频回放采集模块异常\n".concat(f.message)})}return Ye});function ot(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var at={collectWindowErrors:!0,debug:!1},it="undefined"!=typeof window?window:"undefined"!=typeof r.g?r.g:{},ct=[].slice,st="?",ut=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;function ft(){return"undefined"!=typeof document&&document.location?document.location.href:""}at.report=function(){var e,t,r=[],n=null,o=null,a=null;function i(e,t){var n=null;if(!t||at.collectWindowErrors){for(var o in r)if(Object.prototype.hasOwnProperty.call(r,o))try{r[o].apply(null,[e].concat(ct.call(arguments,2)))}catch(a){n=a}if(n)throw n}}function c(){var e=a,t=n;n=null,a=null,o=null,i.apply(null,[e,!1].concat(t))}function s(t,r,n,o,s){var u=j(s)?s.error:s,f=j(t)?t.message:t;if(a)at.computeStackTrace.augmentStackTraceWithInitialElement(a,r,n,f),c();else if(u&&S(u))i(at.computeStackTrace(u),!0);else{var l,d={url:r,line:n,column:o};if(P(f)){var p=f.match(ut);p&&(l=p[1],f=p[2])}d.func=st,i({name:l,message:f,url:ft(),stack:[d]},!0)}return!!e&&e.apply(this,arguments)}function u(){t||(e=it.onerror,it.addEventListener("error",(function(e){try{var t=[(e=e||window.event).message||"",e.filename||""];t.push("undefined"==typeof e.lineno?1:e.lineno),t.push("undefined"==typeof e.colno?1:e.colno),t.push("undefined"==typeof e.error?{}:e.error),s.apply(this,t)}catch(r){}})),t=!0)}function f(e,t){var r=ct.call(arguments,1);if(a){if(o===e)return;c()}var i=at.computeStackTrace(e);if(a=i,o=e,n=r,setTimeout((function(){o===e&&c()}),i.incomplete?2e3:0),!1!==t)throw e}return f.subscribe=function(e){u(),r.push(e)},f.unsubscribe=function(e){for(var t=r.length-1;t>=0;--t)r[t]===e&&r.splice(t,1)},f.uninstall=function(){t&&(it.onerror=e,t=!1,e=undefined),r=[]},f}(),at.computeStackTrace=function(){function e(e){if("undefined"!=typeof e.stack&&e.stack){for(var t,r,n,o=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|[a-z]:|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,a=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx(?:-web)|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,i=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|moz-extension).*?:\/.*?|\[native code\]|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,c=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,s=/\((\S*)(?::(\d+))(?::(\d+))\)/,u=e.stack.split("\n"),f=[],l=0,d=u.length;l<d;++l){if(r=o.exec(u[l])){var p=r[2]&&0===r[2].indexOf("native");r[2]&&0===r[2].indexOf("eval")&&(t=s.exec(r[2]))&&(r[2]=t[1],r[3]=t[2],r[4]=t[3]),n={url:p?null:r[2],func:r[1]||st,args:p?[r[2]]:[],line:r[3]?+r[3]:null,column:r[4]?+r[4]:null}}else if(r=a.exec(u[l]))n={url:r[2],func:r[1]||st,args:[],line:+r[3],column:r[4]?+r[4]:null};else{if(!(r=i.exec(u[l])))continue;r[3]&&r[3].indexOf(" > eval")>-1&&(t=c.exec(r[3]))?(r[3]=t[1],r[4]=t[2],r[5]=null):0!==l||r[5]||"undefined"==typeof e.columnNumber||(f[0].column=e.columnNumber+1),n={url:r[3],func:r[1]||st,args:r[2]?r[2].split(","):[],line:r[4]?+r[4]:null,column:r[5]?+r[5]:null}}if(!n.func&&n.line&&(n.func=st),n.url&&"blob:"===n.url.substr(0,5)){var g=new XMLHttpRequest;g.open("GET",n.url,!1),g.send(null);try{if(200===g.status){var h=g.responseText||"",_=(h=h.slice(-300)).match(/\/\/# sourceMappingURL=(.*)$/);if(_){var m=_[1];"~"===m.charAt(0)&&(m=("undefined"!=typeof document&&document.location?document.location.origin?document.location.origin:"".concat(document.location.protocol,"//").concat(document.location.hostname).concat(document.location.port?":".concat(document.location.port):""):"")+m.slice(1)),n.url=m.slice(0,-4)}}}catch(y){}}f.push(n)}return f.length?{name:e.name,message:e.message,url:ft(),stack:f}:null}}function t(e,t,r){var n={url:t,line:r};if(n.url&&n.line){if(e.incomplete=!1,n.func||(n.func=st),e.stack.length>0&&e.stack[0].url===n.url){if(e.stack[0].line===n.line)return!1;if(!e.stack[0].line&&e.stack[0].func===n.func)return e.stack[0].line=n.line,!1}return e.stack.unshift(n),e.partial=!0,!0}return e.incomplete=!0,!1}function r(e,o){for(var a,i,c=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,s=[],u={},f=!1,l=r.caller;l&&!f;l=l.caller)if(l!==n&&l!==at.report){if(i={url:null,func:st,line:null,column:null},l.name?i.func=l.name:(a=c.exec(l.toString()))&&(i.func=a[1]),"undefined"==typeof i.func)try{i.func=a.input.substring(0,a.input.indexOf("{"))}catch(p){}u["".concat(l)]?f=!0:u["".concat(l)]=!0,s.push(i)}o&&s.splice(0,o);var d={name:e.name,message:e.message,url:ft(),stack:s};return t(d,e.sourceURL||e.fileName,e.line||e.lineNumber),d}function n(t,n){var o=null;n=null==n?0:+n;try{if(o=e(t))return o}catch(a){if(at.debug)throw a}try{if(o=r(t,n+1))return o}catch(a){if(at.debug)throw a}return{name:t.name,message:t.message,url:ft()}}return n.augmentStackTraceWithInitialElement=t,n.computeStackTraceFromStackProp=e,n}();var lt=at;function dt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var gt,ht="undefined"!=typeof window?window:"undefined"!=typeof r.g?r.g:{},_t=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._lastCaptruedException=null,this._lastData=null,this._lastEventId=null,this._errCallback=null,this._globalOptions={ignoreErrors:[],stackTraceLimit:50,collectWindowErrors:!0,captureUnhandledRejections:!0},this._ignoreOnError=0,this._lastCaptruedEvent=null}var t,r,n;return t=e,(r=[{key:"init",value:function(e){var t=this,r=e.callback,n=e.confSource;r="function"==typeof r?r:function(){},this._errCallback=r;var o=this._globalOptions;o.ignoreErrors.push(/^Script error\.?$/),o.ignoreErrors.push(/^Javascript error: Script error\.? on line 0$/),o.ignoreErrors=function(e){for(var t,r=[],n=0,o=e.length;n<o;n++)P(t=e[n])?r.push(t.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")):t&&t.source&&r.push(t.source);return new RegExp(r.join("|"),"i")}(o.ignoreErrors),lt.report.subscribe((function(){if(-1!==n.conf.collect_event_types.indexOf("error")){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];t._handleOnErrorStackInfo.apply(t,r)}})),o.captureUnhandledRejections&&this._attachPromiseRejectionHandler(n)}},{key:"_handleOnErrorStackInfo",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};t.mechanism=t.mechanism||{type:"onerror",handled:!1,time:(new Date).getTime()},this._ignoreOnError||this._handleStackInfo(e,t)}},{key:"_handleStackInfo",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=this._prepareFrames(e,t);this._processException(e.name,e.message,e.url,e.lineno,r,t)}},{key:"_prepareFrames",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=this,n=[];if(e.stack&&e.stack.length&&(e.stack.forEach((function(t){var o=r._normalizeFrame(t,e.url);o&&n.push(o)})),t&&t.trimHeadFrames))for(var o=0;o<t.trimHeadFrames&&o<n.length;o++)n[o].in_app=!1;return n=n.slice(0,this._globalOptions.stackTraceLimit).filter((function(e){return e.in_app}))}},{key:"_normalizeFrame",value:function(e,t){var r={filename:e.url,lineno:e.line,colno:e.column,"function":e.func||"?"};return e.url||(r.filename=t),r.in_app=!/(StackTracer|TraceKit)\./.test(r["function"]),r}},{key:"_processException",value:function(e,t,r,n,o,a){var i=(e?"".concat(e,": "):"")+(t||"");if(!this._globalOptions.ignoreErrors.test||!this._globalOptions.ignoreErrors.test(t)&&!this._globalOptions.ignoreErrors.test(i)){var c;o&&o.length?(r=o[0].filename||r,o.reverse(),c={frames:o}):r&&(c={frames:[{lineno:n,filename:r,in_app:!0}]});var s=pt({exception:{values:[{value:t,type:e,stacktrace:c}]},transaction:r},a),u=s.exception.values[0];null==u.type&&""===u.value&&(u.value="Unrecoverable error caught"),!s.exception.mechanism&&s.mechanism&&(s.exception.mechanism=s.mechanism,delete s.mechanism),s.exception.mechanism=s.exception.mechanism||{},s.exception.mechanism=pt({type:"generic",handled:!0},s.exception.mechanism),this._errCallback(s)}}},{key:"_attachPromiseRejectionHandler",value:function(e){return this._promiseRejectionHandler=this._promiseRejectionHandler.bind(this,e),ht.addEventListener&&ht.addEventListener("unhandledrejection",this._promiseRejectionHandler),this}},{key:"_promiseRejectionHandler",value:function(e,t){if(-1!==e.conf.collect_event_types.indexOf("error")){var r=null;r=P(t.reason)?{message:t.reason}:t.reason,this.captureException(r,{mechanism:{type:"onunhandledrejection",handled:!1,time:(new Date).getTime()}})}}},{key:"captureException",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(t=pt({trimHeadFrames:0},t),j(e)&&e.error)e=e.error;else{if(T(e)||D(e)){var r=e.name||(T(e)?"DOMError":"DOMException"),n=e.message?"".concat(r,": ").concat(e.message,"$"):r;return this.captureMessage(n,pt(pt({},t),{},{stacktrace:!0,trimHeadFrames:t.trimHeadFrames+1}))}if(!S(e))return}this._lastCapturedException=e;try{var o=lt.computeStackTrace(e);this._handleStackInfo(o,t)}catch(a){}return this}},{key:"captureMessage",value:function(e,t){if(!this._globalOptions.ignoreErrors.test||!this._globalOptions.ignoreErrors.test(e)){var r,n=pt({message:e+=""},t=t||{});try{throw new Error(e)}catch(c){r=c}r.name=null;var o=lt.computeStackTrace(r),a=k(o.stack)&&o.stack[1];if(a&&"StackTracer.captureException"===a.func&&(a=o.stack[2]),this._globalOptions.stacktrace||t.stacktrace||""===n.message){n.fingerprint=null==n.fingerprint?e:n.fingerprint,(t=pt({trimHeadFrames:0},t)).trimHeadFrames+=1;var i=this._prepareFrames(o,t);n.stacktrace={frames:i.reverse()}}return n.fingerprint&&(n.fingerprint=k(n.fingerprint)?n.fingerprint:[n.fingerprint]),this._errCallback(n),this}}}])&&ot(t.prototype,r),n&&ot(t,n),e}();function mt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mt(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}o(_t,"getInstance",(gt=null,function(e){return gt||(gt=new _t(e)),gt}));var vt,wt,bt,Ot,kt,xt,Et,St,jt,Tt,Dt,Pt,Lt=(vt=window.innerWidth,wt=window.innerHeight,bt={},Ot=function(){clearTimeout(bt.timer),clearTimeout(bt.excTimer),bt.score_arr=[],bt.startTime=performance.now(),bt.lastResourceIndex=performance.getEntriesByType("resource").length-1},kt=function(){bt.observer.disconnect()},xt=function(e){var t=function(e,t,r,n){var o=arguments.length>4&&arguments[4]!==undefined?arguments[4]:[];if("function"!=typeof performance.getEntriesByType)return{resources:[],lastIndex:e};for(var a=[],i=performance.getEntriesByType("resource").slice(e+1),c=i.length,s=r+t,u=0;u<c;u++){var f=i[u];if(!(f.duration<=0||""===f.initiatorType||"xmlhttprequest,fetch".indexOf(f.initiatorType)>-1||f.startTime<r||t&&f.responseEnd>s||o.length>0&&Le(f.name,o))){var l=f.transferSize||f.decodedBodySize||f.encodedBodySize||0,d=f.name;d=J(d),window.cordova&&(d=(d=d.replace(new RegExp("^[a-zA-Z]+://([\\w\\.\\-]+(:\\d+)?)?".concat(h)),"")).replace(new RegExp("^[a-zA-Z]+://".concat(g)),"")),a.push({u:d,s:l,du:$(f.duration,!0),st:+n+f.startTime,rst:f.startTime-r,it:f.initiatorType||""})}}return{resources:a,lastIndex:e+c}}(bt.lastResourceIndex,e.t,bt.start_time,bt.zeroTime,[bt.confEndpoint]),r={du:e.t,res:t.resources,capturedType:(null==e?void 0:e.capturedType)||"fmp"};if(!bt.$self$.first_pgl){bt.$self$.first_pgl=1;var n="function"==typeof performance.getEntriesByType?performance.getEntriesByType("navigation")[0]:null;n&&n.duration>0&&(r.nty=n.type,r.fs=z(n.fetchStart,6),r.dls=z(n.domainLookupStart,6),r.dle=z(n.domainLookupEnd,6),r.cs=z(n.connectStart,6),r.ce=z(n.connectEnd,6),r.ues=z(n.unloadEventStart,6),r.uee=z(n.unloadEventEnd,6),r.scs=z(n.secureConnectionStart,6),r.rqs=z(n.requestStart,6),r.rps=z(n.responseStart,6),r.rpe=z(n.responseEnd,6),r.di=z(n.domInteractive,6),r.dcs=z(n.domContentLoadedEventStart,6),r.dce=z(n.domContentLoadedEventEnd,6),r.dc=z(n.domComplete,6),r.les=z(n.loadEventStart,6),r.lee=z(n.loadEventEnd,6))}bt.$self$.curr_pgl||(bt.$self$.curr_pgl=1,bt.report(y[1],{__fastCurrPage__:bt.getCurrPage(),g:r,t:e.ct})),Ot()},Et=function zt(e){for(var t=1;t<e.length;t++)if(e[t].score<e[t-1].score)return e.splice(t,1),zt(e);return e},St=function Mt(e){if(bt.reverseValue){bt.excTimer&&(clearTimeout(bt.excTimer),bt.excTimer=0);var t="leave"===e?"leave":"fmp";if(function(e,t){var r=performance.now()-e,n=bt.score_arr;return!(r>t||r-(n&&n.length&&n[n.length-1].t||0)>1e3)}(bt.startTime,1e4)&&"leave"!==e)bt.excTimer=setTimeout((function(){Mt()}),500);else{kt(),bt.reverseValue=0;for(var r=Et(bt.score_arr),n=null,o=1;o<r.length;o++)if(r[o].t>=r[o-1].t){var a=r[o].score-r[o-1].score;(!n||n.rate<=a)&&(n={t:r[o].t,ct:r[o].ct,rate:a})}if(n&&n.t>0&&n.t<36e5)xt(yt(yt({},n),{},{capturedType:t}));else{var i=0;if("leave"===e)i=Math.max((new Date).getTime()-bt.$self$.page_enter,0);else if(bt.$self$.first_pgl)i=z(performance.now()-bt.startTime,6);else{var c="function"==typeof performance.getEntriesByType?performance.getEntriesByType("navigation")[0]:null;c&&c.duration>0&&(i=z(c.duration,6))}xt({t:i,ct:De(bt.$self$),capturedType:t})}}}},jt=function(){bt.reverseValue=1,St("leave")},Tt=function(e){e||Ot(),bt.observer.observe(document,{childList:!0,subtree:!0}),bt.reverseValue=1,St()},Dt=function Ut(e,t,r){var n=0,o=e.tagName;if("SCRIPT"!==o&&"STYLE"!==o&&"META"!==o&&"HEAD"!==o){var a=e.children?e.children.length:0;if(a>0)for(var i=e.children,c=a-1;c>=0;c--)n+=Ut(i[c],t+1,n>0);if(n<=0&&!r){var s=e.getBoundingClientRect(),u=s.width,f=s.height,l=s.left,d=s.top;if(d>wt||d+f<0||l>vt||l+u<0)return 0}n+=1+.5*t}return n},Pt=function(){var e=performance.now()-bt.startTime,t=document.querySelector("body");if(t){var r=0;r+=Dt(t,1,!1),bt.score_arr.push({score:r,t:e,ct:De(bt.$self$)})}else bt.score_arr.push({score:0,t:e,ct:De(bt.$self$)})},function(e){var t=window.MutationObserver||window.WebKitMutationObserver;return bt.observer&&bt.observer instanceof t||(bt.confEndpoint=e.conf.endpoint,bt.zeroTime=e.start_time,bt.reverseValue=1,bt.startTime=performance.getEntriesByType("navigation")[0]&&performance.getEntriesByType("navigation")[0].responseEnd||0,bt.score_arr=[],bt.getCurrPage=function(){return{curr_hash:e.curr_hash,curr_search:e.curr_search,curr_href:e.curr_href}},bt.timer=0,bt.excTimer=0,bt.observer=new t(Pt),bt.report=e.createLog,bt.lastResourceIndex=-1,bt.$self$=e,bt.start=Tt,bt.stop=kt,bt.leaveExcute=jt,Tt(!0)),bt}),At=["log_store","conf"];function It(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ct(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?It(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):It(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Rt=_t.getInstance(),Nt=(new Date).getTime(),$t=function(r,n){r||(r={});var o="fasttrackerinited",a="fastlogcreated",i=[],s=x(window.__fastTrackerInitConfigs__)?Ct({},window.__fastTrackerInitConfigs__):{};if(l.forEach((function(e){s[e]===undefined&&window["__fastTrackerConfig_".concat(e,"__")]!==undefined&&(s[e]=window["__fastTrackerConfig_".concat(e,"__")])})),(r=Ct(Ct({},s),r)).endpoint?P(r.endpoint)&&/^https?:\/\//.test(r.endpoint)?r.endpoint="/"===r.endpoint.slice(-1)?r.endpoint.slice(0,-1):r.endpoint:i.push("初始化参数endpoint[日志上报地址]不合法"):i.push("初始化参数endpoint[日志上报地址]必填"),!r.accessKey||!P(r.accessKey)||r.logstore&&P(r.logstore)||(r.logstore=r.accessKey),r.logstore&&P(r.logstore)||i.push("初始化参数accessKey或者logstore[日志上报密钥]必填"),i.length>0)return O({msg:i.join("\n")}),B();if(window[d]&&window[d].inited)return c(o,window[d]),window[d];if(window[p]&&window[p].inited)return c(o,window[p]),window[p];var f={},g=window,h=g.screen,m=g.navigator,w=ge.get("__tracker_user_id__")||localStorage.getItem("__tracker_user_id__")||ie();ve(w);var b=ge.get("__fast_sid__")||ie();we(b);var S,j,T=K(),D={env:n||window.__fastTrackerLogEnv__||window.__fastTrackerEnv__||"prod",ins_id:ie(),sid:b,start_time:Nt,ts_counter:0,last_ts:null,conf:(S=r,j=Ce(S),Oe(Oe({},{enable:1,is_spa:!0,include_search:!1,log_content_attribute:"data-log",log_event_attribute:"data-event",log_module_attribute:"data-module",report_api_params:!1,api_ignore_urls:[],ignore_pages:[],api_url_regx:"",collect_event_types:["event","page","click","api","error","crash"],capture_type:0,tenant_reader:{key:"",range:["url","localstorage","sessionstorage","cookie","window"]},real_user_reader:{key:"",range:["url","localstorage","sessionstorage","cookie","window"]},user_group_reader:{key:"",range:["url","localstorage","sessionstorage","cookie","window"]},app_version_reader:{key:"",range:["url","localstorage","sessionstorage","cookie","window"]},real_user_name_reader:{key:"",range:["url","localstorage","sessionstorage","cookie","window"]},real_user_role_reader:{key:"",range:["url","localstorage","sessionstorage","cookie","window"]},real_user_post_reader:{key:"",range:["url","localstorage","sessionstorage","cookie","window"]},real_user_bu_name_reader:{key:"",range:["url","localstorage","sessionstorage","cookie","window"]},trace_config:{tid_type:"fast",rules:[],headers:[]},replay:{error:!1}}),j)),ha_inited:!1,log_store:[],page_enter:(new Date).getTime(),curr_hash:T.curr_hash,curr_search:T.curr_search,curr_href:T.curr_href,first_pgl:0,curr_pgl:0,curr_pgsted:0,curr_pid:ie(),prev_page:Z(null),ps_timer:0,sid_refresh_timer:0,api_timer:0,api_que:[],api_cache:{},api_perfCache:{},last_api:-1,last_resource:-1,regu_called:!1,last_sync:0,last_hi:0,send_timer:0,wfile_timer:0,last_sul:0,insertData:{a:r.app||"",cd:{},ahv:"",av:"",m:"",tn:"",ru:"",ug:"",run:"",rur:"",rup:"",rubn:""},static_base:{u:w,dsw:h.width,dsh:h.height,ua:m.userAgent,tv:"1.0.1-r27",tl:"javascript",at:""},hybrid_base:{},hybrid_rt:{}};window.cordova&&(D.static_base.at=_);var L=function(){D.static_base.at="miniprogram"===window.__wxjs_environment?"WeChat Mini Program":""};return/miniProgram/.test(D.static_base.ua)?D.static_base.at="WeChat Mini Program":window.WeixinJSBridge&&window.WeixinJSBridge.invoke?L():document.addEventListener("WeixinJSBridgeReady",L,!1),D.createLog=function(e){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;clearTimeout(D.sid_refresh_timer),D.sid_refresh_timer=setTimeout((function(){var e=ie();we(e),D.sid=e,D.sid_refresh_timer=0}),1801e3),clearTimeout(D.send_timer);try{var o=null;r&&r.__fastCurrPage__&&r.__fastCurrPage__.curr_href&&(o=r.__fastCurrPage__,delete r.__fastCurrPage__);var i=V(o||D),s=i.href,f=!Ie(D.conf.collect_event_types,e)&&!X(s,D.conf.ignore_pages);if(e===y[5]&&r&&(1===r.__fromReportError&&(f=!0),delete r.__fromReportError),f){var l=Re(D,o),p=Ct(Ct({e:e},l),r);switch(p.m||!D.insertData.m&&!window.__fastTrackerGlobalModule__||(p.m=window.__fastTrackerGlobalModule__?"".concat(window.__fastTrackerGlobalModule__):D.insertData.m),p.g&&x(p.g)||delete p.g,t(p.l)){case"string":try{p.l=x(JSON.parse(p.l))?JSON.parse(p.l):{msg:p.l}}catch(T){p.l=p.l?{msg:p.l}:null}break;case"number":case"boolean":case"symbol":p.l={msg:p.l};break;case"function":case"undefined":p.l=null;break;default:!x(p.l)&&p.l&&(p.l={msg:p.l})}p.l||delete p.l,e===y[2]?p.g=Ne(p,s,D.static_base.at===_):e===y[4]&&(p.g.api=J(p.g.api),p.g.m=P(p.g.m)?p.g.m.toUpperCase():"GET"),p.t||(p.t=De(D)),D.insertData.cd&&x(D.insertData.cd)&&(x(p.l)?p.l=Ct(Ct({},D.insertData.cd),p.l):p.l=Ct({},D.insertData.cd));var g=e===y[5];if(g&&x(D.rcdIns)&&E(D.rcdIns.caughtError))try{p.g.replay=D.rcdIns.caughtError()}catch(L){}if(e===y[1]&&window!==window.parent){var h=function(e){E(e.postMessage)&&e.postMessage({source:d,payload:Ct(Ct(Ct(Ct(Ct({},D.static_base),D.hybrid_base),D.hybrid_rt),p),{},{env:D.env})},"*")};1===D.conf.capture_type?h(window.parent):2===D.conf.capture_type&&h(window.top)}if(c(a,Ct(Ct(Ct(Ct(Ct({},D.static_base),D.hybrid_base),D.hybrid_rt),p),{},{env:D.env})),window.cordova){var m=(new Date).getTime();if(2===n||m-D.last_hi<(g?3e4:3e5))p["do"]=D.hybrid_rt["do"],p.nt=(D.hybrid_rt.nt||"").toUpperCase(),Fe(D,p,n);else{var v=window,w=v.MFastLog,b=function(e){p["do"]=e["do"],p.nt=e.nt.toUpperCase(),g&&(p.ram=e.ram,p.rom=e.rom),D.hybrid_rt={"do":p["do"],nt:p.nt,ram:e.ram,rom:e.rom},D.last_hi=m,Fe(D,p,n)};if(g&&x(w))w.getBasicInformation((function(e){b({ram:e.m_available_ram||"",rom:e.m_available_rom||"",nt:e.network||"","do":e.device_orientation||""})}));else{var k=window.navigator,S=window.screen,j={nt:"","do":""};k&&k.connection&&k.connection.type&&(j.nt=k.connection.type||""),S&&S.orientation&&S.orientation.type&&(j["do"]=S.orientation.type||""),b(Ct(Ct({},j),{},{ram:"",rom:""}))}}}else Fe(D,p,n)}}catch(L){O({msg:"探针内部异常createLog失败\n".concat(L.message)})}1===D.conf.enable&&(D.send_timer=setTimeout((function(){Fe(D,null,1)}),u))},tt(D),me(D),"function"==typeof performance.getEntriesByType&&(window.MutationObserver||window.WebKitMutationObserver)&&(D.fmpInstance=Lt(D)),f.registUser=function(e){if(x(e)&&e)try{v.forEach((function(t){var r=t.n,n=t.sn;e[r]!==undefined&&(D.insertData[n]=e[r]||"")})),D.regu_called=!0,Pe(D)}catch(t){O({msg:"探针API:registUser内部异常\n".concat(t.message)})}else O({msg:"探针API:registUser的参数必须是对象"})},f.setBasicInfo=function(e){if(x(e)&&e)try{var t=0;e.custom_data&&(x(e.custom_data)?(D.insertData.cd=e.custom_data,t=1):O({msg:"探针API:setBasicInfo参数中custom_data必须是对象"})),e.app_hotupdate_version&&(D.insertData.ahv=String(e.app_hotupdate_version),t=1),e.app_version&&(D.insertData.av=String(e.app_version),t=1),(e.globalModule||e.module)&&(D.insertData.m=String(e.globalModule||e.module),t=1),e.app&&(D.insertData.a=String(e.app),t=1),t&&Pe(D)}catch(r){O({msg:"探针API:setBasicInfo内部异常\n".concat(r.message)})}else O({msg:"探针API:setBasicInfo的参数必须是对象"})},f.report=function(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"",n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;if(P(e)&&e)if(e)try{var o=y.indexOf(e)>-1;o&&(O({msg:"参数eventName与内置事件重复，已增加user-defined-前缀"}),e="user-defined-".concat(e));var a={};(t||"number"==typeof t)&&(a.l=t),r&&P(r)&&(a.m=r),D.createLog(e,a,n)}catch(i){O({msg:"探针API:report内部异常\n".concat(i.message)})}else O({msg:"参数eventName必填"});else O({msg:"参数eventName必须是字符串"})},f.reportError=function(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";try{var n={__fromReportError:1};return"string"==typeof r&&r&&(n.module=r),x(t)?n.fast_extra_info=t:"string"==typeof t&&t&&(n.fast_extra_info={extra_info:t}),Rt.captureException.call(Rt,e,n),"ok"}catch(o){O({msg:"探针API:reportError内部异常\n".concat(o.message)})}},f.reportLoaded=function(){O({msg:"该方法已移除，天眼将自动记录页面加载时间"})},f.setEnable=function(e){1!==e&&0!==e||(D.conf.enable=e)},f.clearLogStore=function(){try{return D.log_store=[],ye(D,[]),"ok"}catch(e){O({msg:"探针API:clearLogStore内部异常\n".concat(e.message)})}},f.printDebug=function(){try{var t=D.log_store,r=D.conf,n=e(D,At),o=window.console;o.log("config: ",r),o.log("$self$: ",n),k(t)&&t.length>0&&o.log("log: ",t)}catch(a){O({msg:"探针API:printDebug内部异常\n".concat(a.message)})}},window[d]=f,window[p]=f,c(o,window[d]),ce(D),oe(D),et(D),Rt.init({confSource:D,callback:function(e){var t={g:{capturedTime:(new Date).getTime(),capturedType:"unknowType",exceptionType:"unkonwType",exceptionReason:"unkonwError",traceFrames:[]}};if(e){if(e.exception){if(e.exception.mechanism){var r=e.exception.mechanism||{};t.g.capturedTime=r.time||(new Date).getTime(),t.g.capturedType=r.type||"unknowType"}if(e.exception.values){var n=e.exception.values[0]||{};t.g.traceFrames=n.stacktrace&&n.stacktrace.frames||[],t.g.exceptionType=n.type||"unkonwType",t.g.exceptionReason=n.value||"unkonwError"}}else e.stacktrace&&k(e.stacktrace.frames)&&(t.g.traceFrames=e.stacktrace.frames,t.g.exceptionReason=e.message||"unkonwError");e.fast_extra_info&&(t.l={extraInfo:e.fast_extra_info}),e.module&&(t.m=e.module),1===e.__fromReportError&&("unknowType"===t.g.capturedType&&(t.g.capturedType="reportError"),t.__fromReportError=1)}if(t.g.traceFrames.length){var o=t.g.traceFrames[t.g.traceFrames.length-1];if(1===t.g.traceFrames.length&&!window.cordova){if(1===o.colno&&1===o.lineno)return;if(!o.colno||!o.lineno)return}/fastTracker/i.test(o.filename)||D.createLog(y[5],t,1)}}}),window.MutationObserver&&x(D.conf.replay)&&D.conf.replay.logstore&&(!0===D.conf.replay.error||!0===D.conf.replay.all)&&(E(window.$$fastRecord)?D.rcdIns=nt(D):function(e,t){var r=0;e.forEach((function(n){var o=document.createElement("script");o.type="text/javascript",o.src=n,document.getElementsByTagName("head")[0].appendChild(o),o.onload=function(){++r===e.length&&t()}}))}(["https://mic-open.mypaas.com.cn/fast-tracker/release/browser/recordlib/tracker-record.min.js"],(function(){D.rcdIns=nt(D)}))),Object.getOwnPropertyNames(f).forEach((function(e){f[e].toString=M(e)})),f.inited=!0,window[d].inited=!0,window[p].inited=!0,console.info("%c天眼(version:".concat("1.0.1-r27",")启动!"),"color:#90f1fe"),console.info("%c运行时配置: ","color:#90f1fe",D.conf),f};window&&!window[d]&&(window[d]=B(),window[p]=window[d]),c("fasttrackerloaded",$t);var Ft=$t}(),n=n["default"]}()}));